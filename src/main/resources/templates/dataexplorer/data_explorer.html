<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="layout :: site-head">
    <title>KSFX - Information Retrieval</title>
</head>
<body>
<header th:replace="layout :: site-header"/>
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">Data Explorer</li>
        <li class="breadcrumb-item active" th:inline="text">[[${timeSeries.name}]]</li>
    </ol>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col" style="max-width:500px;">
            <div style="width:450px;overflow:hidden">
            <li class="list-group-item">
                <span style="margin-left:0px;margin-right:0px"></span>
                <form id="seriesNameSearchForm" th:action="@{/dataexplorer/searchseries}" method="post">
                    <div class="input-group">
                        <div style="width:360px">
                            <input type="text" th:value="${seriesNameSearch}" class="form-control" name="seriesNameSearch" id="seriesNameSearch" />
                        </div>
                        <span class="input-group-btn">
                            <a th:if="${searchActive}" th:href="@{/dataexplorer/searchseriesreset}" id="resetSearch" class="btn btn-default"><span class="fa fa-remove"></span></a>
                            <button th:unless="${searchActive}" class="btn btn-default" type="submit"><span class="fa fa-search"></span></button>
                        </span>
                    </div>
                </form>
            </li>
            <div th:utext="${browser}">
            </div>
            </div>
            <a th:href="@{/dataexplorer/search}" class="fa fa-search">Search</a>
        </div>
        <div class="col-6"> <!-- style="padding-top:0px;margin-top:0px" -->
            <div th:if="${observationsPage.totalPages  > 0}">
                <div th:replace="components/pagination :: pagination(path='/dataexplorer/' + ${timeSeries.id}, page=${observationsPage})"></div>
                <!-- <div style="float:right"><a th:href="@{/informationretrieval/publishingconfigurationedit}" class="fa fa-plus fa-2x" title="Add Publishing Configuration" alt="Add Publishing Configuration"></a>&nbsp;&nbsp;&nbsp;</div> -->
                <table class="table table-striped table-responsive-md">
                    <thead>
                    <header th:replace="components/sortable_table_header :: tableheader(headers=${ {'observation_time','scalar_value'} },sortables=${ {'observation_time'} },names=${ {'Time','Value'} },page=${observationsPage},path='/dataexplorer/' + ${timeSeries.id})" />
                    </thead>
                    <tbody>
                    <tr th:each="observation : ${observationsPage.content}">
                        <td><span th:if="${observation.observationTime != null}" th:inline="text">[[${dateFormatUtil.formatSimpleTimeAndDateString(observation.observationTime)}]]</span></td>
                        <td><span th:if="${observation.observationTime != null}"><a href="#" onclick="$('#data-explorer-iframe').attr('src',$(this).attr('lnk'))" th:attr="lnk=@{/dataexplorer/viewobservation/{timeseriesid}/{observationtime}/{sourceid}(timeseriesid=${observation.timeSeriesId},observationtime=${dateFormatUtil.formatToISO8601TimeAndDateString(observation.observationTime)},sourceid=${#uris.escapePathSegment(observation.sourceId)})}" data-toggle="modal" data-target="#standardModal">[[${observation.scalarValue}]]</a></span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<footer th:replace="layout :: site-footer" />
</body>
</html>