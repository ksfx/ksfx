<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="layout :: site-head">
    <title>KSFX - Information Retrieval</title>
</head>
<body>
<header th:replace="layout :: site-header"/>
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">Data Explorer</li>
        <li class="breadcrumb-item active" th:inline="text">[[${timeSeries.name}]]</li>
    </ol>
</nav>

<div class="container-fluid"> <!-- style="width:100%;max-width:100%;height:100%;min-height:100%;padding-top:0px;margin-top:0px" -->
    <div class="row"> <!-- style="width:100%;height:100%;min-height:100%;padding-top:0px;margin-top:0px" -->
        <div class="col" style="max-width:500px;"> <!-- style="width:200px;height:100%;min-height:100%;padding-top:0px;margin-top:0px" -->
            <div style="width:450px;overflow:hidden" th:utext="${browser}">
            </div>
        </div>
        <div class="col-6"> <!-- style="padding-top:0px;margin-top:0px" -->
            <div th:if="${observationsPage.totalPages  > 0}">
                <div th:replace="components/pagination :: pagination(path='/dataexplorer/' + ${timeSeries.id}, page=${observationsPage})"></div>
                <!-- <div style="float:right"><a th:href="@{/informationretrieval/publishingconfigurationedit}" class="fa fa-plus fa-2x" title="Add Publishing Configuration" alt="Add Publishing Configuration"></a>&nbsp;&nbsp;&nbsp;</div> -->
                <table class="table table-striped table-responsive-md">
                    <thead>
                    <header th:replace="components/sortable_table_header :: tableheader(headers=${ {'observation_time','scalar_value'} },sortables=${ {'observation_time'} },names=${ {'Time','Value'} },page=${observationsPage},path='/dataexplorer/' + ${timeSeries.id})" />
                    </thead>
                    <tbody>
                    <tr th:each="observation : ${observationsPage.content}">
                        <td><span th:if="${observation.observationTime != null}" th:inline="text">[[${dateFormatUtil.formatSimpleTimeAndDateString(observation.observationTime)}]]</span></td>
                        <td><span th:if="${observation.observationTime != null}"><a href="#" onclick="$('#data-explorer-iframe').attr('src',$(this).attr('lnk'))" th:attr="lnk=@{/dataexplorer/viewobservation/{timeseriesid}/{observationtime}/{sourceid}(timeseriesid=${observation.timeSeriesId},observationtime=${dateFormatUtil.formatToISO8601TimeAndDateString(observation.observationTime)},sourceid=${#uris.escapePathSegment(observation.sourceId)})}" data-toggle="modal" data-target="#exampleModal">[[${observation.scalarValue}]]</a></span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="height:500px">
                <iframe src="/publishing/" id="data-explorer-iframe" style="width:100%;height:100%" frameborder="0"></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<footer th:replace="layout :: site-footer" />
</body>
</html>